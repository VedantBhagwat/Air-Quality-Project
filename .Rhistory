NO2_combined <- melt(NO2, id.vars=c('Date'),var='values')
NO_combined <- melt(NO, id.vars=c('Date'),var='values')
O3_combined <- melt(O3, id.vars=c('Date'),var='values')
PM2_5_combined <- melt(PM2_5, id.vars=c('Date'),var='values')
PM10_combined <- melt(PM10, id.vars=c('Date'),var='values')
View(NO2_combined)
View(NO2_combined)
# Grouped data
NO2_combined %>%
group_by(values) %>%
plot_time_series(Date, value,
.facet_ncol = 2, .facet_scales = "free",
.interactive = interactive)
library(tidyverse)
library(lubridate)
# install.packages("timetk")
library(timetk)
library(imputeTS)
library(ggplot2)
# Grouped data
NO2_combined %>%
group_by(values) %>%
plot_time_series(Date, value,
.facet_ncol = 2, .facet_scales = "free",
.interactive = interactive)
# Grouped data
NO2_combined %>%
group_by(values) %>%
plot_time_series(as.Date(Date), value,
.facet_ncol = 2, .facet_scales = "free",
.interactive = interactive)
View(NO2)
13048*24
# Grouped data
new_NO2 <-
NO2_combined %>%
group_by(values) %>%
plot_time_series(as.Date(Date), value,
.facet_ncol = 5, .facet_scales = "free",
.interactive = interactive)
# Grouped data
new_NO2 <-
NO2_combined %>%
group_by(values) %>%
plot_time_series(as.Date(Date), value,
.facet_ncol = 4, .facet_scales = "free",
.interactive = interactive)
# Time series plots
NO2 %>%
plot_time_series(as.Date(Date), Limerick.Peoples.Park,
.interactive = interactive,
.plotly_slider = TRUE)
# Grouped data
new_NO2 <-
NO2_combined %>%
group_by(values) %>%
plot_time_series(as.Date(Date), value,
.facet_ncol = 4, .facet_scales = "free",
.interactive = interactive)
# Grouped data
new_NO2 <-
NO2_combined %>%
group_by(values) %>%
plot_time_series(as.Date(Date), value,
.facet_ncol = 2, .facet_scales = "free",
.interactive = interactive)
library(reshape2)
library(ggplot2)
NO2_clone <- NO2
str(NO2_clone)
summary(NO2_clone)
NO2_clone[,-1] %>% gather() %>% head()
library(dplyr)
NO2_clone[,-1] %>% gather() %>% head()
library(dplyr)
NO2_clone[,-1] %>% gather() %>% head()
########### 2018 NO2
library(ggplot2)
library(tidyr)
NO2_clone[,-1] %>% gather() %>% head()
ggplot(gather(NO2_clone[,-1]), aes(value)) +
geom_histogram(bins = 10) +
facet_wrap(~key, scales = 'free_x')
boxplot(NO2_clone[-1])
boxplot(NO2_clone[,-1])
View(NO2_clone)
boxplot(NO2_clone[,c(-1,-5)])
NO2_clone[,c(-1,-5)] %>% gather() %>% head()
ggplot(gather(NO2_clone[,c(-1,-5)]), aes(value)) +
geom_boxplot(bins = 10) +
facet_wrap(~key, scales = 'free_x')
ggplot(gather(NO2_clone[,c(-1,-5)]), aes(value)) +
geom_boxplot(bins = 10) +
facet_wrap(~key, scales = 'free_x') +
coord_flip()
ggplot(gather(NO2_clone[,c(-1,-5)]), aes(value)) +
geom_boxplot(bins = 10) +
facet_wrap(~key, scales = 'free_x')
which(NO2_clone[,-1] < -21)
which(c(1,2,-54,55,-33,) < -21)
which(c(1,2,-54,55,-33) < -21)
which(NO2_clone$Cobh < -21)
# Replace -9999 with NA
replace(NO2_clone$Cobh, which(NO2_clone$Cobh < -21), NA)
# Replace -9999 with NA
replace(NO2_clone$Cobh, which(NO2_clone$Cobh < -21), NA)
NO2_clone %>% mutate(Cobh = replace(Cobh, which(Cobh< -21), NA))
# Replace -9999 with NA
replace(NO2_clone$Cobh, which(NO2_clone$Cobh < -21), NA)
NO2_clone$Cobh[NO2_clone$Cobh < -21] <- NA
hist(NO2_clone$Cobh)
hist(NO2_clone$Cobh)
summary(NO2_clone$Cobh)
hist(NO2$Cobh)
summary(NO2$Cobh)
NO2_clone[NO2_clone$Castlebar<0,] # 137
sum(is.na(NO2_clone$Castlebar))
summary(NO2_clone$Castlebar)
NO2_clone[NO2_clone$Castlebar<0,] # 137
sum(NO2_clone[NO2_clone$Castlebar<0,])
nrow(NO2_clone[NO2_clone$Castlebar<0,])
sum(is.na(NO2_clone$Castlebar))
NO2_clone[,c(-1,-5)] %>% gather() %>% head()
ggplot(gather(NO2_clone[,c(-1,-5)]), aes(value)) +
geom_boxplot(bins = 10) +
facet_wrap(~key, scales = 'free_x')
boxplot(NO2_clone$Ballyfermot)
boxplot(NO2_clone[,c(-1,-5)])
cor(NO2$Rathmines, O3$Rathmines)
cor(NO2$Rathmines, O3$Rathmines, na.rm=T)
cor(NO2$Rathmines, O3$Rathmines, use="complete.obs")
cor(NO2$Rathmines, PM2_5$Rathmines, use="complete.obs")
cor(NO2$Rathmines, PM10$Rathmines, use="complete.obs")
cor(NO2$Rathmines, NO$Rathmines, use="complete.obs")
data.frame(c(NO2$Rathmines,NO$Rathmines))
df <- data.frame(c(NO2$Rathmines,NO$Rathmines,PM2_5$Rathmines,PM10$Rathmines))
View(df)
df <- data.frame(NO2$Rathmines,NO$Rathmines,PM2_5$Rathmines,PM10$Rathmines)
cor(df)
df <- data.frame(NO2$Rathmines,NO$Rathmines,O3$Rathmines,PM2_5$Rathmines,PM10$Rathmines)
cor(df)
cor(df,use="complete.obs")
df_Rathmines <- data.frame(NO2$Rathmines,NO$Rathmines,O3$Rathmines,PM2_5$Rathmines,PM10$Rathmines)
df_Limerick.Peoples.Park <- data.frame(NO2$Limerick.Peoples.Park,NO$Limerick.Peoples.Park,O3$Limerick.Peoples.Park,PM2_5$Limerick.Peoples.Park,PM10$Limerick.Peoples.Park)
df_Waterford <- data.frame(NO2$Waterford,NO$Waterford,O3$Waterford,PM2_5$Waterford,PM10$Waterford)
cor(df_Rathmines,use="complete.obs")
cor(df_Limerick.Peoples.Park,use="complete.obs")
cor(df_Limerick.Peoples.Park,use="complete.obs")
cor(df_Waterford,use="complete.obs")
df_Rathmines <- data.frame(NO2$Rathmines,NO$Rathmines,O3$Rathmines,PM2_5$Rathmines,PM10$Rathmines,
row.names = c("NO2","NO","O3","PM2.5","PM10"))
df_Rathmines <- data.frame((NO2$Rathmines,NO$Rathmines,O3$Rathmines,PM2_5$Rathmines,PM10$Rathmines),
row.names = c("NO2","NO","O3","PM2.5","PM10"))
df_Rathmines <- data.frame(NO2$Rathmines,NO$Rathmines,O3$Rathmines,PM2_5$Rathmines,PM10$Rathmines)
df_Limerick.Peoples.Park <- data.frame(NO2$Limerick.Peoples.Park,NO$Limerick.Peoples.Park,O3$Limerick.Peoples.Park,PM2_5$Limerick.Peoples.Park,PM10$Limerick.Peoples.Park)
df_Waterford <- data.frame(NO2$Waterford,NO$Waterford,O3$Waterford,PM2_5$Waterford,PM10$Waterford)
df_Rathmines <- row.names("NO2","NO","O3","PM2.5","PM10")
View(df_Rathmines)
row.names(df_Rathmines) <- c("NO2","NO","O3","PM2.5","PM10")
row.names(df_Rathmines) <- c("NO2","NO","O3","PM2.5","PM10")
df_Rathmines <- data.frame(NO2$Rathmines,NO$Rathmines,O3$Rathmines,PM2_5$Rathmines,PM10$Rathmines,
values=c("NO2","NO","O3","PM2.5","PM10"))
View(df_Rathmines)
cols <- c("NO2","NO","O3","PM2.5","PM10")
df_Rathmines <- data.frame(NO2$Rathmines,NO$Rathmines,O3$Rathmines,PM2_5$Rathmines,PM10$Rathmines,
row.names = cols)
colnames(df_Rathmines) <- cols
View(df_Rathmines)
df_Limerick.Peoples.Park <- data.frame(NO2$Limerick.Peoples.Park,NO$Limerick.Peoples.Park,O3$Limerick.Peoples.Park,PM2_5$Limerick.Peoples.Park,PM10$Limerick.Peoples.Park)
df_Rathmines <- data.frame(NO2$Rathmines,NO$Rathmines,O3$Rathmines,PM2_5$Rathmines,PM10$Rathmines)
df_Waterford <- data.frame(NO2$Waterford,NO$Waterford,O3$Waterford,PM2_5$Waterford,PM10$Waterford)
cols <- c("NO2","NO","O3","PM2.5","PM10")
colnames(df_Limerick.Peoples.Park) <- cols
colnames(df_Rathmines) <- cols
colnames(df_Waterford) <- cols
cor(df_Limerick.Peoples.Park,use="complete.obs")
cor(df_Rathmines,use="complete.obs")
cor(df_Waterford,use="complete.obs")
boxplot(NO2_clone$Ballyfermot)
View(NO2_clone)
NO2_clone <- NO2_clone[,-5]
View(NO2_clone)
# Boxplots
boxplot(NO2_clone[,c(-1)])
summary(NO2_clone)
# Min. 1st Qu.  Median    Mean    3rd Qu.    Max.    NA's
#  -0.800   1.300   2.400   3.746   4.500  96.400     180
summary(NO2_clone$Davitt.Road)
for(i in 2:ncol(X2019_Hourly_NO2_for_UCC)){
replace(i, which(i < 0), NA)
}
for(i in 2:ncol(NO2_clone)){
replace(i, which(i < 0), NA)
}
for(i in 2:ncol(NO2_clone)){
NO2_clone[,i] <- replace(i, which(i < 0), NA)
}
NO2_clone <- NO2
# Remove cobh column from data frame because of missing data
NO2_clone <- NO2_clone[,-5]
# Boxplots
boxplot(NO2_clone[,c(-1)])
# Replace negative values with NA
replace(NO2_clone$Castlebar, which(NO2_clone$Castlebar < 0), NA)
# Replace negative values with NA
NO2_clone$Castlebar <- replace(NO2_clone$Castlebar, which(NO2_clone$Castlebar < 0), NA)
summary(NO2_clone)
NO2_clone %>% mutate_each(funs(replace(., .<0, NA)))
NO2_clone %>% mutate_all(funs(replace(., .<0, NA)))
a <- NO2_clone %>% mutate_all(funs(replace(., .<0, NA)))
a
View(a)
summary(a)
NO2_clone %>% mutate_all(funs(replace(., .<0, NA)))
# Replace negative values with NA
# NO2_clone$Castlebar <- replace(NO2_clone$Castlebar, which(NO2_clone$Castlebar < 0), NA)
# NO2_clone %>% mutate(Cobh = replace(Cobh, which(Cobh< -21), NA))
NO2_clone <- NO2_clone %>% mutate_all(funs(replace(., .<0, NA)))
summary(NO2_clone)
# Plot the graphs again
NO2_clone[,-1] %>% gather() %>% head()
ggplot(gather(NO2_clone[,-1]), aes(value)) +
geom_histogram(bins = 10) +
facet_wrap(~key, scales = 'free_x')
boxplot(NO2_clone[,c(-1)])
boxplot(NO2_clone[,c(-1)], main="f")
summary(NO2_clone)
for(i in 2:ncol(NO2_clone)){
NO2_clone[is.na(NO2_clone[,i]), i] <- format(round(median(NO2_clone[,i], na.rm = TRUE), 2), nsmall = 2)
NO2_clone[,i] <- as.double(NO2_clone[,i])
}
# Plot the graphs again
NO2_clone[,-1] %>% gather() %>% head()
ggplot(gather(NO2_clone[,-1]), aes(value)) +
geom_histogram(bins = 10) +
facet_wrap(~key, scales = 'free_x') +
ggtitle("Histogram of NO2 after data preprocessing")
boxplot(NO2_clone[,c(-1)], main="Boxplot of NO2 after data preprocessing")
NO2_clone[,c(-1)] %>% gather() %>% head()
ggplot(gather(NO2_clone[,c(-1)]), aes(value)) +
geom_boxplot(bins = 10) +
facet_wrap(~key, scales = 'free_x') +
stat_boxplot(geom ='errorbar')
NO2_clone[,c(-1)] %>% gather() %>% head()
ggplot(gather(NO2_clone[,c(-1)]), aes(value)) +
stat_boxplot(geom ='errorbar')+
geom_boxplot(bins = 10) +
facet_wrap(~key, scales = 'free_x') +
ggtitle("Boxplot of NO2 after data preprocessing")
summary(NO2_clone)
View(df_Limerick.Peoples.Park)
write.csv(df_Limerick.Peoples.Park,"E:\\CIT\\Project\\AQ data\\Export\\df_Limerick.Peoples.Park.csv", row.names = FALSE)
write.csv(df_Limerick.Peoples.Park,"E:\\CIT\\Project\\AQ data\\Export\\df_Waterford", row.names = FALSE)
write.csv(df_Limerick.Peoples.Park,"E:\\CIT\\Project\\AQ data\\Export\\df_Limerick.Peoples.Park.csv", row.names = FALSE)
write.csv(df_Rathmines,"E:\\CIT\\Project\\AQ data\\Export\\df_Rathmines.csv", row.names = FALSE)
write.csv(df_Waterford,"E:\\CIT\\Project\\AQ data\\Export\\df_Waterford.csv", row.names = FALSE)
summary(df_Limerick.Peoples.Park)
summary(df_Rathmines)
summary(df_Waterford)
summary(df_Rathmines)
df_Rathmines
View(df_Rathmines)
is.na(df_Rathmines)
NO2_ts <- df_Rathmines[,"NO2"]
NO2_ts
autoplot(NO2_ts , main="Air Passengers")
library(astsa)
library(tseries) # for ADF test
library(forecast) # auto.arima
autoplot(NO2_ts , main="Air Passengers")
typeof(NO2_ts)
autoplot(NO2_ts , main="Air Passengers")
summary(NO2_ts)
ts(NO2_ts)
NO2_ts <- ts(NO2_ts)
autoplot(NO2_ts , main="Air Passengers")
library(tidyverse)
library(lubridate)
# install.packages("timetk")
library(timetk)
library(imputeTS)
library(ggplot2)
# Setup for the plotly charts (# FALSE returns ggplots)
interactive <- FALSE
NO2 %>%
plot_time_series(as.Date(Date), Rathmines,
.interactive = interactive,
.plotly_slider = TRUE)
acf2(NO2_ts)
acf2(NO2_ts)
acf2(NO2_ts)
summary(NO2_ts)
dA = decompose(NO2_ts, "additive")
autoplot(dA)
dA = decompose(NO2_ts, "additive")
dA = decompose(NO2_ts, "additive")
View(NO2_clone)
View(df_Rathmines)
NO2_ts <- NO2_clone$Rathmines
typeof(NO2_ts)
autoplot(NO2_ts , main="Air Passengers")
NO2_ts <- ts(NO2_ts)
# autoplot(NO2_ts , main="Air Passengers")
NO2 %>%
plot_time_series(as.Date(Date), Rathmines,
.interactive = interactive,
.plotly_slider = TRUE)
summary(NO2_ts)
acf2(NO2_ts)
dA = decompose(NO2_ts, "additive")
hourly_ts_NO2 <- zoo(
x         = NO2_clone$Rathmines,
order.by  = NO2_clone$Date,
frequency = 24
)
library(zoo)
hourly_ts_NO2 <- zoo(
x         = NO2_clone$Rathmines,
order.by  = NO2_clone$Date,
frequency = 24
)
typeof(hourly_ts_NO2)
NO2_ts <- zoo(
x         = NO2_clone$Rathmines,
order.by  = NO2_clone$Date,
frequency = 24
)
# NO2_ts <- ts(NO2_ts)
autoplot(NO2_ts , main="Air Passengers")
NO2 %>%
plot_time_series(as.Date(Date), Rathmines,
.interactive = interactive,
.plotly_slider = TRUE)
summary(NO2_ts)
NO2_ts
acf2(NO2_ts)
acf2(NO2_ts[2])
acf2(NO2_ts[,2])
dA = decompose(NO2_ts, "additive")
acf2(NO2_ts)
View(NO2_ts)
sum(is.na(NO2_ts))
acf2(NO2_ts)
dA = decompose(NO2_ts, "additive")
dA = decompose(NO2_ts, "additive")
length(NO2_ts)
summary(NO2_ts)
drop_na(NO2_ts)
library(tidyr)
drop_na(NO2_ts)
na.omit(NO2_ts)
summary(NO2_ts)
NO2_ts <- na.omit(NO2_ts)
summary(NO2_ts)
NO2_ts <- na.remove(NO2_ts)
NO2_ts <- na_remove(NO2_ts)
summary(NO2_ts)
NO2_ts <- na.remove.ts(NO2_ts)
sum(is.na(NO2_ts))
# NO2_ts <- ts(NO2_ts)
autoplot(NO2_ts , main="Air Passengers")
acf2(NO2_ts)
acf2(NO2_ts,na.rm = T)
NO2_ts <- na_remove(NO2_ts)
acf2(NO2_ts)
NO2_ts <- zoo(
x         = NO2_clone$Waterford,
order.by  = NO2_clone$Date,
frequency = 24
)
# NO2_ts <- ts(NO2_ts)
autoplot(NO2_ts , main="Air Passengers")
NO2 %>%
plot_time_series(as.Date(Date), Rathmines,
.interactive = interactive,
.plotly_slider = TRUE)
summary(NO2_ts)
acf2(NO2_ts)
summary(NO2_clone)
NO2_clone <- na_remove(NO2_clone)
NO2_clone <- na.omit(NO2_clone)
summary(NO2_clone)
which(is.na(NO2_clone$Date))
View(NO2_clone)
NO2_clone$Date[2138,]
summary(NO2_clone)
NO2_clone <- na.omit(NO2_clone)
which(is.na(NO2_clone$Date))
NO2_clone <- NO2_clone[-c(2138, 10874), ]
summary(NO2_clone)
NO2_ts <- zoo(
x         = NO2_clone$Waterford,
order.by  = NO2_clone$Date,
frequency = 24
)
# NO2_ts <- ts(NO2_ts)
autoplot(NO2_ts , main="Air Passengers")
NO2_ts <- zoo(
x         = NO2_clone$Rathmines,
order.by  = NO2_clone$Date,
frequency = 24
)
# NO2_ts <- ts(NO2_ts)
autoplot(NO2_ts , main="Air Passengers")
NO2 %>%
plot_time_series(as.Date(Date), Rathmines,
.interactive = interactive,
.plotly_slider = TRUE)
summary(NO2_ts)
NO2_ts <- na.omit(NO2_ts)
summary(NO2_ts)
acf2(NO2_ts)
acf2(NO2_ts)
library(tidyverse)
library(lubridate)
# install.packages("timetk")
library(timetk)
library(imputeTS)
library(ggplot2)
# Setup for the plotly charts (# FALSE returns ggplots)
interactive <- FALSE
library(zoo)
library(tidyr)
library(astsa)
library(tseries) # for ADF test
library(forecast) # auto.arima
summary(NO2_clone)
NO2_ts <- zoo(
x         = NO2_clone$Rathmines,
order.by  = NO2_clone$Date,
frequency = 24
)
# NO2_ts <- ts(NO2_ts)
autoplot(NO2_ts , main="Air Passengers")
NO2 %>%
plot_time_series(as.Date(Date), Rathmines,
.interactive = interactive,
.plotly_slider = TRUE)
summary(NO2_ts)
acf2(NO2_ts)
dA = decompose(NO2_ts, "additive")
NO2_ts
gc()
memory.limit()
NO2_clone <- NO2
summary(NO2_clone)
NO2_ts <- zoo(
x         = NO2_clone$Rathmines,
order.by  = NO2_clone$Date,
frequency = 24
)
# NO2_ts <- ts(NO2_ts)
autoplot(NO2_ts , main="Air Passengers")
NO2 %>%
plot_time_series(as.Date(Date), Rathmines,
.interactive = interactive,
.plotly_slider = TRUE)
summary(NO2_ts)
acf2(NO2_ts)
NO2_clone <- na.omit(NO2_clone)
which(is.na(NO2_clone$Date))
summary(NO2_clone)
summary(NO2_ts)
NO2_ts <- zoo(
x         = NO2_clone$Rathmines,
order.by  = NO2_clone$Date,
frequency = 24
)
# NO2_ts <- ts(NO2_ts)
autoplot(NO2_ts , main="Air Passengers")
NO2 %>%
plot_time_series(as.Date(Date), Rathmines,
.interactive = interactive,
.plotly_slider = TRUE)
summary(NO2_ts)
acf2(NO2_ts)
window()
dev.window()
windows()
acf2(NO2_ts)
NO2_clone <- NO2
# Replace negative values with NA
# NO2_clone$Castlebar <- replace(NO2_clone$Castlebar, which(NO2_clone$Castlebar < 0), NA)
# NO2_clone %>% mutate(Cobh = replace(Cobh, which(Cobh< -21), NA))
NO2_clone <- NO2_clone %>% mutate_all(funs(replace(., .<0, NA)))
summary(NO2_clone)
# Replace NA with median
for(i in 2:ncol(NO2_clone)){
NO2_clone[is.na(NO2_clone[,i]), i] <- format(round(median(NO2_clone[,i], na.rm = TRUE), 2), nsmall = 2)
NO2_clone[,i] <- as.double(NO2_clone[,i])
}
summary(NO2_clone)
summary(NO2_clone)
# NO2_clone <- na.omit(NO2_clone)
which(is.na(NO2_clone$Date))
NO2_clone <- NO2_clone[-c(2138, 10874), ]
summary(NO2_clone)
NO2_ts <- zoo(
x         = NO2_clone$Rathmines,
order.by  = NO2_clone$Date,
frequency = 24
)
# NO2_ts <- ts(NO2_ts)
autoplot(NO2_ts , main="Air Passengers")
# NO2_ts <- ts(NO2_ts)
autoplot(NO2_ts , main="Hourly data of Rathmines")
NO2 %>%
plot_time_series(as.Date(Date), Rathmines,
.interactive = interactive,
.plotly_slider = TRUE)
summary(NO2_ts)
acf2(NO2_ts)
